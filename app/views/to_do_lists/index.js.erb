$('#lists').html("<%= escape_javascript(render @to_do_lists) %>")

   $(function() {
    $('.sortable').sortable({
      stop: function(event, ui) {
        $(ui.item).effect("highlight");
        var item_id = $(ui.item).attr('id').replace(/[^\d]+/g, '');
        var position = ui.item.prevAll().length;
        $.post('/to_do_items/' + item_id + '/update_position', {
          'position': position
         });
         $(ui.item).effect("highlight");
      }
    });

    $( ".connectedSortable" ).sortable({
      connectWith: ".connectedSortable",
        stop: function(event, ui) {
          $(ui.item).effect("highlight");
          var item_id = $(ui.item).attr('id').replace(/[^\d]+/g, '');
          var position = ui.item.prevAll().length;
          var new_list = $(ui.item).parent().attr('id').replace(/[^\d]+/g, '');
          $.post('/to_do_items/' + item_id + '/update_list_and_position', {
          'position': position,
          'new_list': new_list
         });
         $(ui.item).effect("highlight");
        }

    }).disableSelection();

      $( ".accordion" ).accordion({
       active: false,
       navigation: false,
       collapsible: true,
       create: function(event, ui) { $("#accordion").show(); }

    });


  });


